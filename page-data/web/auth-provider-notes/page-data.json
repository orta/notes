{"componentChunkName":"component---node-modules-gatsby-theme-kb-src-templates-topic-js","path":"/web/auth-provider-notes","result":{"data":{"file":{"childMdx":{"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"Auth Provider Notes\"), mdx(\"p\", null, \"At Artsy we wrote our own authentication system, I'd say this is pretty easy with Rails via the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/heartcombo/devise\"\n  }, \"devise gem\"), \" and I don't think we ever really had much of a debate about moving off to something else. There was always going to be someone to ensure that everything worked. For \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://cloudcapture.it\"\n  }, \"Capture\"), \" we offloaded auth entirely to Zoom, meaning we implemented no authentication system ourselves and used the zoom user ID as the key identifier. This meant we never needed to think about the long term ramifications of auth.\"), mdx(\"p\", null, \"Now for (new thing) I've been back and forth on what to do with authentication. RedwoodJS the app framework I'm using has \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://redwoodjs.com/docs/authentication#self-hosted-auth-installation-and-setup\"\n  }, \"quite strong opinions\"), \" that authentication is something you should be using a separate service for. \"), mdx(\"p\", null, \"RedwoodJS doesn't quite throw you out and demand you do this, they have a way to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/redwoodjs/redwood/pull/2701\"\n  }, \"set up a simple db-backed authentication system\"), \", but it's built to be simple and extending it to cover all of the possible production cases is largely not recommended. I've been rolling with this for a while because I'm still wiping my db with regularity and simple auth is simple.\"), mdx(\"p\", null, \"I'm kinda on my second run of thinking about authentication as a service, the first time I \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://twitter.com/orta/status/1447984697812963334\"\n  }, \"asked the internet\"), \":\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"I\\u2019ve been debating for a few weeks now about the trade-offs of using auth0/etc instead of self building identity management. Anyone got strong opinions either way?\")), mdx(\"p\", null, \"But I only really got responses from folks who work for those companies and people who weren't sold on the pricing model. I think \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://community.redwoodjs.com/t/local-jwt-auth-implementation/1359/5\"\n  }, \"the best argument\"), \" I've heard came from \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://twitter.com/dthyresson\"\n  }, \"@dthyresson\"), \":\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"I don\\u2019t meant to be the bearer (haha pun intended!) of bad news, but web apps cost money. Infrastructure costs money.\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"And I don\\u2019t work for Auth0 or anyone else, but I have been in the position to do a cost benefit and risk analysis of choosing a service or rolling one\\u2019s own and going with a service always wins. (And I know in certain countries some of these services are not an option \\u2013 I get that. There is always a contrary case and that happens.)\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Auth0 starts charging at 1,000+ monthly active users. And I think that is $23 US or $276 per year.\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"I\\u2019ve freelanced and hired developers and in the best case scenario that \\u2013 for the year \\u2013 is 2 hours of work or maybe 5 if you can pay someone $~50/hr. But even if you pay them $15/hr (which believe it or not is $3 more than most minimum wage jobs in the US). That\\u2019s 4 hours work for 5 days (or 1 week). And you might say, with this auth client I can get it up and running in an hour \\u2013 and you\\u2019d be right. But - you don\\u2019t have: password change, email verification, rules pipeline, RBAC support a login/logout or any UI, etc.\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"So, for the cost of a handful or two hours of work \\u2013 you have an Auth services than can service 1,000 active users per month. For. A. Year.\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Yes, the cost goes up as the user base goes up \\u2013 but \\u2026 guess what \\u2026 everything about web apps gets more expensive one you have to support more users.\")), mdx(\"p\", null, \"I think it's a pretty compelling argument, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://twitter.com/helvetica\"\n  }, \"Zach\"), \" has made the same case. \"), mdx(\"p\", null, \"My biggest tension comes from the problem that having a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"free user tier\"), \" which could be drastically bigger could throw off the numbers completely. As an example, in \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://flappyroyale.io\"\n  }, \"Flappy Royale\"), \" we had about 100k free users over the course of 2-3 weeks, and settled at 250k over the next 2-3 months. It's not unreasonable to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"prepare\"), \" for those sorts of scales with (new thing) and suddenly \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"we're in the \\\"Contact Us\\\" section of Auth0's pricing\"), \" instantly. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Tricky\"), \".\"), mdx(\"p\", null, \"Now that I'm sketching out how a native app should talk to the RedwoodJS app, it felt like a second time to re-look at the ecosystem and try to figure out what I want.\"), mdx(\"h3\", null, \"What am I looking for?\"), mdx(\"p\", null, \"I know today I want: \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Email or Phone + Password user auth (though I'm not offended by magic links) - we will probably allow some Oauth, but maybe not all\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"User model / Accounts will live in my DB in some form, so anything on the auth providers side is probably something I will need to duplicate\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"There could be a lot of users, who have good incentives to come back more regularly than once a month\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Logins should persist for a long time, ideally be self refreshing somehow\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"I think internal organizational Oauth is something we will need to consider within a reasonable timeframe\")), mdx(\"h3\", null, \"How should it work as a user?\"), mdx(\"p\", null, \"Effectively I want to give away the Login page, and the first page of the Signup page. In the future it might make sense to think about MFA\"), mdx(\"h3\", null, \"Things which will get an auth cut for\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"No pricing calculator\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A focus on \\\"web3\\\", it's a service which is literally blocking people signing up/logging in. If they can't be trusted to not join the grift, they can't be responsible for users.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Per user pricing, I'd be looking at too many free user accounts which would maybe make that unaffordable at the start \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"No custom branding etc\\xA0\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Required hosting with the service\")), mdx(\"h3\", null, \"Services\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Auth0. Considered the \\\"default\\\" identification service to use, recently bought by Okta. They competed, and it's likely that the consolidation will mean price raising. Either way, I think it falls into the bucket of per-user pricing which would quickly mean we're paying enterprise prices. That said, they have documentation/tutorials/tools everywhere.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Amazon IAM. I'm trying to avoid giving Amazon money. \")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Azure Active Directory. Seems to mainly offer a way to re-use your Microsoft account. So no go.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Clerk.dev. Strong focus on Next, and providing UI components which is a nice touch. Not sure I'd use them, but it lowers the barriers for sure. Good design. Mentions web3 stuff a bit, but not too offensive. Seems to largely work with all oauth providers I'm interested in. Getting webhooks to ensure the DB stays in sync requires another service though. Pricing probably can't work \")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Firebase. I'm trying to avoid giving Google money. We used it with Flappy Royale and it worked well though.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"FusionAuth. Probably the most compelling, I've got it running locally to test. The design feels quite cheap, but the auth pages can probably be extensively designed. I'd have to build the RedwoodJS integration but that's not offensive. \")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Keycloak. OSS version of Auth0, tempting, though hosting it myself feels like I might have the same security issues I'd get from writing some of this myself. Had a recent CVE which would have required remembering to updating the server etc. Third-party \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.cloud-iam.com/#pricing\"\n  }, \"paid hosting\"), \" seems to be quite expensive per user. \")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Supabase. Quite tempting to be honest, there's no upper bounds on users - people who have used Supabase seem to love it. We probably won't use too many other features but it could maybe act as \")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Playfab. A Microsoft games-oriented firebase competitor. We used it with Flappy Royale, doesn't really do auth as a service separately.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Magic.link. Turned off by web3 / blockchain / NFT. Didn't go any further than homepage.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Netlify Identity. Only works if you host on netlify, and I'm not doing that today.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"nhost.io. Feels a little unfinished, with buttons not working and CSS bugs in the home/blog/docs. Doesn't seem to have authentication as a separate services, but seems like a reasonable firebase competitor.\"))), mdx(\"h3\", null, \"Alternatives\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Build out a separate app just for auth? Why bother though, when we could just host FusionAuth?\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Find a way to have free users \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"not\"), \" use authentication? We do want people to have some session state without users, maybe becoming a paid user is the only way to do any logging in at all? This feels a bit tricky to really pull off (and quite limiting overall) so is unlikely\"))), mdx(\"h3\", null, \"Summary\"), mdx(\"p\", null, \"I dunno. That's why it's notes. I think I might try prototype something in Supabase, and then give FusionAth a run before I make an decisions.\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"","private":false},"outboundReferences":[],"inboundReferences":[]},"fields":{"slug":"/web/auth-provider-notes","title":"Auth Provider Notes"}}},"pageContext":{"id":"19b403f9-6056-56a2-b5ec-60c5d98e9bcb","refWordMdxSlugDict":{}}},"staticQueryHashes":["2221750479","2380733210","2768355698","63159454","847517413"]}